{% extends 'main.html' %}
{% load static %}
{% block title %}Welcome to the Hospital Management System{% endblock %}

{% block content %}
<section class="login-vh-100">
    <div class="container-fluid h-custom">
      <div class="row login-row justify-content-center align-items-center h-100">
        <div class="col-md-9 col-lg-6 col-xl-5">
          <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp" 
               class="login-img-fluid" alt="Sample image">
        </div>
        <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
          <form method="POST" action="{% url 'login' %}" class="login-form">
            {% csrf_token %}
            <div class="d-flex flex-row align-items-center justify-content-center justify-content-lg-start">
              <p class="lead fw-normal mb-0 me-3">Sign in with</p> 
              <button type="button" class="btn login-btn-primary btn-floating mx-1">
                <i class="fab fa-facebook-f"></i>
              </button>
              <button type="button" class="btn login-btn-primary btn-floating mx-1">
                <i class="fab fa-twitter"></i>
              </button>
              <button type="button" class="btn login-btn-primary btn-floating mx-1">
                <i class="fab fa-linkedin-in"></i>
              </button>
            </div>

            <div class="login-divider my-4">
              <p class="text-center fw-bold mx-3 mb-0">Or</p>
            </div>

            <!-- Username input -->
            <div class="login-form-outline mb-4">
                <label class="form-label" for="form3Example3">Username</label>
                <input type="text" name="username" id="form3Example3" class="login-form-control" placeholder="Enter your username" required />
            </div>

            <!-- Password input -->
            <div class="login-form-outline mb-3 position-relative">
                <label class="form-label" for="form3Example4">Password</label>
                <input type="password" name="password" id="form3Example4" class="login-form-control" placeholder="Enter password" required />
                <!-- Visibility Toggle Button -->
                <button type="button" class="btn btn-link position-absolute end-0 top-50 translate-middle-y text-black mt-2" onclick="togglePasswordVisibility()">
                  <i id="toggle-icon" class="fas fa-eye"></i>
                </button>
            </div>

            <div class="d-flex justify-content-between align-items-center">
              <!-- Checkbox -->
              <div class="login-form-check mb-0">
                <input class="login-form-check-input me-2" type="checkbox" value="" id="form2Example3" />
                <label class="login-form-check-label" for="form2Example3">
                  Remember me
                </label>
              </div>
              <a href="#!" class="login-text-body">Forgot password?</a>
            </div>

            <div class="text-center text-lg-start mt-4 pt-2">
              <button type="submit" class="btn login-btn-primary btn-lg" style="padding-left: 2.5rem; padding-right: 2.5rem;">Login</button>
              <p class="small fw-bold mt-2 pt-1 mb-0">Don't have an account? <a href="/register" class="register-link">Register</a></p>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Link for Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

    <!-- Link to the CSS file -->
    <link rel="stylesheet" href="{% static 'css/login_style.css' %}">
</section>

<!-- SweetAlert 2 CSS -->
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.min.css" rel="stylesheet">

<!-- SweetAlert 2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.min.js"></script>

<script type="text/javascript">
    function togglePasswordVisibility() {
        var passwordField = document.getElementById("form3Example4");
        var toggleIcon = document.getElementById("toggle-icon");
        
        if (passwordField.type === "password") {
            passwordField.type = "text";
            toggleIcon.classList.remove("fa-eye");
            toggleIcon.classList.add("fa-eye-slash");
        } else {
            passwordField.type = "password";
            toggleIcon.classList.remove("fa-eye-slash");
            toggleIcon.classList.add("fa-eye");
        }
    }
</script>

{% if invalid_credentials %}
    <script type="text/javascript">
        Swal.fire({
            icon: 'error',
            title: 'Invalid username or password',
            text: 'Please check your credentials and try again.',
        });
    </script>
{% endif %}
{% endblock %}
